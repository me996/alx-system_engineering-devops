#!/usr/bin/env bash
# Update the package list
sudo apt update

# Install Nginx
sudo apt install -y nginx

# Create a new HTML file to serve
echo "Hello World!" | sudo tee /var/www/html/index.html > /dev/null

# Configure Nginx to serve the HTML file
sudo bash -c 'cat > /etc/nginx/sites-available/default << EOF
server {
    listen 80;
    server_name localhost;

    location / {
        root /var/www/html;
        index index.html;
    }
}
EOF'

# Test the Nginx configuration for syntax errors
sudo nginx -t

# Start Nginx without using systemctl
sudo service nginx start

# Optional: Allow Nginx through the firewall (if ufw is enabled)
sudo ufw allow 'Nginx Full'

# Confirm the installation and configuration
echo "Nginx has been installed and configured. You can test it with curl."
